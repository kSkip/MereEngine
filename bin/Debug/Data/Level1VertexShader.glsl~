#version 330

#extension GL_EXT_gpu_shader4 : enable

uniform sampler2D tex;

uniform mat4 MV, P, translation, rotation;
uniform bool skipMVP, skipLighting;

in vec3 position;
in vec3 normal;
in vec2 texcoord;

out vec3 fragPosition, fragNormal;
out vec2 fragTexcoord;

void main(){
	
	vec4 transformedposition;
	vec4 transformednormal;

	transformednormal = rotation * vec4(normal,0.0);
	transformedposition = translation * rotation * vec4(position,1.0);

	if(!skipMVP){

		gl_Position = P * MV * transformedposition;

	}else{

		gl_Position = transformedposition;

	}

	fragPosition = transformedposition.xyz;
	fragNormal = transformednormal.xyz;
	fragTexcoord = texcoord;

}
